"use strict";(self.webpackChunkmyblog=self.webpackChunkmyblog||[]).push([[1345],{5302:(t,e,a)=>{a.r(e),a.d(e,{assets:()=>i,contentTitle:()=>r,default:()=>u,frontMatter:()=>o,metadata:()=>c,toc:()=>d});var s=a(4848),n=a(8453);const o={sidebar_position:9,sidebar_label:"9\u3001\u9ebb\u5a46\u8c46\u8150\uff5c\u6c38\u8fdc\u4e0d\u8981\u76f4\u63a5\u8bbe\u7f6estate\u7684\u503c"},r="9\u3001\u9ebb\u5a46\u8c46\u8150\uff5c\u6c38\u8fdc\u4e0d\u8981\u76f4\u63a5\u8bbe\u7f6estate\u7684\u503c",c={id:"react/React \u6280\u5de7/9\u3001\u9ebb\u5a46\u8c46\u8150\uff5c\u6c38\u8fdc\u4e0d\u8981\u76f4\u63a5\u8bbe\u7f6estate\u7684\u503c/9\u3001\u9ebb\u5a46\u8c46\u8150\uff5c\u6c38\u8fdc\u4e0d\u8981\u76f4\u63a5\u8bbe\u7f6estate\u7684\u503c",title:"9\u3001\u9ebb\u5a46\u8c46\u8150\uff5c\u6c38\u8fdc\u4e0d\u8981\u76f4\u63a5\u8bbe\u7f6estate\u7684\u503c",description:"\u6c38\u8fdc\u4e0d\u8981\u76f4\u63a5\u8bbe\u7f6estate\u7684\u503c\uff1athis.state.data = { a: 1 }\u3002\u8fd9\u4e2a\u4f1a\u5bfc\u81f4\u51e0\u4e2a\u95ee\u9898\uff1a 1\uff1a\u7ec4\u4ef6\u4e0d\u4f1a\u91cd\u65b0\u6e32\u67d3 2\uff1ashouldComponentUpdate(nextProps, nextState) \u51fd\u6570\u91cc\u9762 this.state\u7684\u503c\u662f\u5df2\u7ecf\u6539\u53d8\u4e86,\u548cnextState\u7684\u503c\u76f8\u540c\u3002",source:"@site/docs/react/React \u6280\u5de7/9\u3001\u9ebb\u5a46\u8c46\u8150\uff5c\u6c38\u8fdc\u4e0d\u8981\u76f4\u63a5\u8bbe\u7f6estate\u7684\u503c/9\u3001\u9ebb\u5a46\u8c46\u8150\uff5c\u6c38\u8fdc\u4e0d\u8981\u76f4\u63a5\u8bbe\u7f6estate\u7684\u503c.md",sourceDirName:"react/React \u6280\u5de7/9\u3001\u9ebb\u5a46\u8c46\u8150\uff5c\u6c38\u8fdc\u4e0d\u8981\u76f4\u63a5\u8bbe\u7f6estate\u7684\u503c",slug:"/react/React \u6280\u5de7/9\u3001\u9ebb\u5a46\u8c46\u8150\uff5c\u6c38\u8fdc\u4e0d\u8981\u76f4\u63a5\u8bbe\u7f6estate\u7684\u503c/",permalink:"/myblog/docs/react/React \u6280\u5de7/9\u3001\u9ebb\u5a46\u8c46\u8150\uff5c\u6c38\u8fdc\u4e0d\u8981\u76f4\u63a5\u8bbe\u7f6estate\u7684\u503c/",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/react/React \u6280\u5de7/9\u3001\u9ebb\u5a46\u8c46\u8150\uff5c\u6c38\u8fdc\u4e0d\u8981\u76f4\u63a5\u8bbe\u7f6estate\u7684\u503c/9\u3001\u9ebb\u5a46\u8c46\u8150\uff5c\u6c38\u8fdc\u4e0d\u8981\u76f4\u63a5\u8bbe\u7f6estate\u7684\u503c.md",tags:[],version:"current",sidebarPosition:9,frontMatter:{sidebar_position:9,sidebar_label:"9\u3001\u9ebb\u5a46\u8c46\u8150\uff5c\u6c38\u8fdc\u4e0d\u8981\u76f4\u63a5\u8bbe\u7f6estate\u7684\u503c"},sidebar:"tutorialSidebar",previous:{title:"8\u3001\u7c89\u4e1d\u767d\u83dc\u867e\u4ec1\u6c64\uff5c\u5b50\u7ec4\u4ef6\u6539\u53d8\u7236\u7ec4\u4ef6\u7684state",permalink:"/myblog/docs/react/React \u6280\u5de7/8\u3001\u7c89\u4e1d\u767d\u83dc\u867e\u4ec1\u6c64\uff5c\u5b50\u7ec4\u4ef6\u6539\u53d8\u7236\u7ec4\u4ef6\u7684state/"},next:{title:"10\u3001\u4e34\u6c82\u7092\u9e21\uff5ccontextAPI\uff0credux or mobx\u7b80\u5355\u7528\u6cd5\u66ff\u4ee3",permalink:"/myblog/docs/react/React \u6280\u5de7/10\u3001\u4e34\u6c82\u7092\u9e21\uff5ccontextAPI\uff0credux or mo/"}},i={},d=[];function l(t){const e={code:"code",h1:"h1",p:"p",pre:"pre",...(0,n.R)(),...t.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.h1,{id:"9\u9ebb\u5a46\u8c46\u8150\u6c38\u8fdc\u4e0d\u8981\u76f4\u63a5\u8bbe\u7f6estate\u7684\u503c",children:"9\u3001\u9ebb\u5a46\u8c46\u8150\uff5c\u6c38\u8fdc\u4e0d\u8981\u76f4\u63a5\u8bbe\u7f6estate\u7684\u503c"}),"\n",(0,s.jsxs)(e.p,{children:["\u6c38\u8fdc\u4e0d\u8981\u76f4\u63a5\u8bbe\u7f6estate\u7684\u503c\uff1a",(0,s.jsx)(e.code,{children:"this.state.data = { a: 1 }"}),"\u3002\u8fd9\u4e2a\u4f1a\u5bfc\u81f4\u51e0\u4e2a\u95ee\u9898\uff1a 1\uff1a\u7ec4\u4ef6\u4e0d\u4f1a\u91cd\u65b0\u6e32\u67d3 2\uff1ashouldComponentUpdate(nextProps, nextState) \u51fd\u6570\u91cc\u9762 this.state\u7684\u503c\u662f\u5df2\u7ecf\u6539\u53d8\u4e86,\u548cnextState\u7684\u503c\u76f8\u540c\u3002"]}),"\n",(0,s.jsx)(e.p,{children:"\u4e3e\u4e2a\u6817\u5b50\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-javascript",children:"// wrong\nconst { data } = this.state;\ndata.a = 1;     // \u7b49\u4ef7\u4e8ethis.state.data.a = 1;\nthis.setState({ data }); // shouldComponentUpdate\u91cc\u9762\u89c2\u5bdf\u5230 this.state \u548cnextState\u7684\u503c\u662f\u76f8\u540c\u7684\n// \u6b64\u65f6\u51fd\u6570\u91cc\u9762\u6027\u80fd\u76f8\u5173\u7684\u4f18\u5316\u662f\u65e0\u6548\u7684\n\n// correct  \u9700\u8981\u7528\u5230\u5f53\u524dstate\u503c\u7684\u5199\u6cd5\nthis.setState(state => ({ data: {...state.data, a: 1} }))\n"})})]})}function u(t={}){const{wrapper:e}={...(0,n.R)(),...t.components};return e?(0,s.jsx)(e,{...t,children:(0,s.jsx)(l,{...t})}):l(t)}},8453:(t,e,a)=>{a.d(e,{R:()=>r,x:()=>c});var s=a(6540);const n={},o=s.createContext(n);function r(t){const e=s.useContext(o);return s.useMemo((function(){return"function"==typeof t?t(e):{...e,...t}}),[e,t])}function c(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(n):t.components||n:r(t.components),s.createElement(o.Provider,{value:e},t.children)}}}]);